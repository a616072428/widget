<!DOCTYPE html><html><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">    <meta name="apple-mobile-web-app-capable" content="yes">    <meta name="apple-mobile-web-app-status-bar-style" content="black">    <meta name="format-detection" content="telephone=no"/>    <title>文章详情</title>    <link rel="stylesheet" href="../../css/api.css" />    <link rel="stylesheet" href="../../css/commonWindow.css" />    <style type="text/css">        html,body{            width: 100%;        }        .header{            width: 100%;            padding: 14px 19px;            box-sizing: border-box;            margin-bottom: 10px;        }        .header p{            font-family: PingFangSC-Medium;            font-size: 20px;            color: #333333;            letter-spacing: 0;            line-height: 28px;        }        .header-bottom{            overflow: hidden;            margin-top: 5px;        }        .header-bottom span{            font-family: PingFangSC-Regular;            font-size: 14px;            color: #BBBBBB;            letter-spacing: 0;            line-height: 20px;            margin-right: 30px;float: left;        }        .header-bottom span em{            width: 17px;            height: 17px;            margin-right: 5px;            background: url("../../icon/time.png") no-repeat center;            background-size: 100%;            float: left;        }        .header-bottom span:nth-of-type(2) em{            background: url("../../icon/onsee_w.png") no-repeat center;            background-size: 100%;            margin-top: 1px;        }        .header-bottom span:nth-of-type(3) em{            background: url("../../icon/share.png") no-repeat center;            background-size: 100%;            margin-top: 1px;        }        .main .img{            width: 100%;            height: 200px;            overflow: hidden;        }        .main .img img{            display: block;        }        .main-info{            width: 100%;            padding: 30px 19px;            box-sizing: border-box;            font-family: PingFangSC-Regular;            font-size: 14px;            color: #444444;            letter-spacing: 0;            line-height: 21px;            margin-bottom: 10px;            white-space: pre-wrap;            word-wrap:break-word;        }        .main-info img{            width: 100%!important;            height: auto!important;        }        /*评论开始*/        .comment-head{            width: 100%;            padding: 0 19px 11px;            box-sizing: border-box;            font-family: PingFangSC-Regular;            font-size: 14px;            color: #BBBBBB;            letter-spacing: 0;            line-height: 20px;            border-bottom: 1px solid #f5f5f5;        }        .comment-head em{            margin-left: 20px;        }        .comment li{            width: 100%;            padding: 17px 19px;            box-sizing: border-box;        }        .operation{            width: 100%;            height: 18px;            margin-top: 11px;        }        .del{            width: 14px;            height: 14px;            float: right;            background:url("../../icon/del.png") no-repeat center/cover;        }        .comment-list .img{            width: 30px;            height: 30px;            overflow: hidden;            border-radius: 50%;            margin-right: 12px;            float: left;        }        .comment-list {            overflow: hidden;            margin-bottom: 12px;        }        .comment-list .img img{            /*width: 100%;height: 100%;*/            display: block;        }        .comment-list p{            font-family: PingFangSC-Regular;            font-size: 14px;            color: #5E5E5E;            letter-spacing: 0;            line-height: 30px;            float: left;        }        .comment-list em{            text-align: center;            width: 18px;height: 11px;            background: #9E7443;            border-radius: 1px;            font-family: PingFangSC-Regular;            font-size: 5px;            color: #FAFAFA;            letter-spacing: -0.12px;            line-height: 11px;            margin-top: 9px;            margin-left: 6px;            float: left;        }        .comment-list span{            font-family: PingFangSC-Regular;            font-size: 13px;            color: #C4C4C4;            letter-spacing: 0;            float: right;            line-height: 30px;        }        .comment-body{            font-family: PingFangSC-Regular;            font-size: 13px;            color: #7F7F7F;            letter-spacing: 0;            line-height: 18px;        }        #commentList{            width: 100%;            height: 100%;            padding-bottom: 50px;        }        #commentList>li{            width: 100%;            max-height: 300px;            padding: 15px;            border-bottom: 1px solid #F5F5F5;        }        #commentList>li:last-child{            border-bottom: 0;        }        .iconInfo{            width: 100%;            height: 29px;        }        .commentIcon{            width: 29px;            height: 29px;            border-radius: 50%;            float: left;            overflow: hidden;        }        /*.commentIcon>img{*/        /*width: 100%;*/        /*height: 100%;*/        /*}*/        .commentName{            height: 20px;            font-family: PingFangSC-Regular;            font-size: 14px;            color: #5E5E5E;            letter-spacing: 0;            text-align: left;            float: left;            margin-left: 12px;            margin-top: 4px;            max-width: 100px;            overflow: hidden;            text-overflow: ellipsis;            white-space: nowrap;        }        .commentName>em{            width: 18px;            height: 12px;            background: #9E7443;            border-radius: 1.25px;            font-family: PingFangSC-Regular;            font-size: 2vw;            color: #FAFAFA;            letter-spacing: -0.12px;            text-align: center;            margin-left: 6px;            margin-top: 4px;            line-height: 12px;            float: right;        }        .commentTime{            height: 18px;            font-family: PingFangSC-Regular;            font-size: 13px;            color: #C4C4C4;            letter-spacing: 0;            text-align: left;            float: right;            margin-top: 4px;        }        .commentInfo{            width: 100%;            font-family: PingFangSC-Regular;            font-size: 13px;            color: #7F7F7F;            letter-spacing: 0;            margin-top: 11px;        }        .operation{            width: 100%;            height: 18px;            margin-top: 11px;        }        .del{            width: 14px;            height: 14px;            float: right;            background:url("../../icon/del.png") no-repeat center/cover;        }        .operation>span:nth-child(2){            height: 17px;            font-family: PingFangSC-Regular;            font-size: 12px;            color: #D2D2D2;            letter-spacing: 0;            text-align: left;            margin-left: 4px;            float: left;        }        .operation>em:nth-child(1){            width: 16px;            height: 12px;            background: url("../../icon/huifu.png") no-repeat;            background-size: cover;            float: left;            margin-top: 2px;        }        .operation>span:nth-child(4){            height: 17px;            font-family: PingFangSC-Regular;            font-size: 12px;            color: #D2D2D2;            letter-spacing: 0;            text-align: left;            margin-left: 5px;            float: left;        }        .operationInfo{            width: 100%;            background: #F9F9F9;            border-radius: 2px;            font-family: PingFangSC-Regular;            font-size: 12px;            color: #646464;            letter-spacing: 0;            text-align: left;            margin-top: 16px;            padding: 10px;            box-sizing: border-box;        }        .operationContent{            width: 100%;            margin-bottom: 4px;        }        .operationContent>span{            font-family: PingFangSC-Regular;            font-size: 12px;            color: #828282;            letter-spacing: 0;            text-align: left;            text-overflow: ellipsis;            overflow: hidden;            display: -webkit-box;            -webkit-line-clamp: 2;            line-clamp: 2;            -webkit-box-orient: vertical;            box-sizing: border-box;            word-break:break-all;            white-space:pre-warp;            word-wrapL:break-word;            text-overflow: -o-ellipsis-lastline;        }        .operationElse>span{            font-family: PingFangSC-Regular;            font-size: 12px;            color: #578FE0;            letter-spacing: 0;            text-align: left;            display: inline-block;        }        .operationElse>em{            width: 12px;            height: 12px;            background: url("../../icon/more_bottom.png") no-repeat;            background-size: 100%;            display: inline-block;            line-height: 12px;            margin-left: 4px;            margin-bottom: -3px;        }    </style></head><body id="body">    <div class="header">        <p id="main-title"></p>        <div class="header-bottom">            <span id="ctime"><em></em></span>            <span id="lookNum"><em></em></span>            <span style="margin-right: 0" onclick="openShare()"><em></em></span>        </div>    </div>    <div class="main">        <div class="img">            <img src="" alt="" id="covers">        </div>        <pre class="main-info" id="content">        </pre>    </div>    <div class="comment">        <div class="comment-head">            用户评论<em id="commentNum"></em>        </div>        <ul id="commentDom">            <!--<li>                <div class="comment-list">                    <div class="img">                        <img src="../../image/myIcon.png" alt="">                    </div>                    <p>Kevin Patrick</p>                    <em>M1</em>                    <span>昨天21:45</span>                </div>                <div class="comment-body">                    当下是数字文化的繁荣年代，在文化底层代码中，首先是文字的蓬勃，文字是最为直接的传达方式之一，所到之处，所得之感，皆可以通过简单的几个字母和文字表。                </div>                <div class="operation">                    <div class="del"onclick="delComment('<%=list[i].id%>',this)"></div>                </div>            </li>-->        </ul>    </div></body><script type="text/javascript" src="../../lib/script/quakooLib/QuakooBase-1.0.0.js"></script><script type="text/javascript" src="../../lib/script/quakooLib/QuakooConfig-1.0.0.js"></script><script type="text/javascript" src="../../lib/script/quakooLib/QuakooBaseApp-1.0.0.js"></script><script type="text/javascript" src="../../lib/script/quakooLib/QuakooBaseAppBusiness-1.0.0.js"></script><script type="text/javascript" src="../../lib/script/quakoo/Config.js"></script><script type="text/javascript" src="../../lib/script/quakoo/project.js"></script><script type="text/javascript" src="../../script/api.js"></script><script type="text/javascript" src="../../script/template-native.js"></script><script type="text/html" id="commentTmp">    <%for(var i=0;i< list.length;i++){%>    <%if(list[i].lastCommentId == 0){%>    <li>        <div class="iconInfo">            <div class="commentIcon">                <%if(list[i].user.iconUrl){%>                <img src="<%=list[i].user.iconUrl%>" style="<%=list[i].user.iconStyle%>" alt=""/>                <%}else{%>                <img src="../../icon/icon108.png" alt="" style="width: 100%;height:100%;">                <%}%>            </div>            <div class="commentName">                <%if(list[i].user.name){%>                <%=list[i].user.name%>                <%}else{%>                <%=list[i].user.phone%>                <%}%>                <%if(list[i].userExpenseLevelInfo){%>                <em><%=list[i].userExpenseLevelInfo.levelName%></em>                <%}%>            </div>            <div class="commentTime"><%=list[i].ctime%></div>        </div>        <div class="commentInfo"><%=list[i].content%></div>        <div class="operation">            <em></em>            <span onclick="diaoyongComment('<%=list[i].id%>')">回复</span>            <%if(loginId==list[i].uid){%>            <div class="del" onclick="delComment('<%=list[i].id%>',this)"></div>            <%}%>        </div>        <%if(list[i].replyComments && list[i].replyComments.length>0){%>        <div class="operationInfo">            <div class="operationContent">                <span>                    <%if(list[i].replyComments[0].user.name){%>                        <%=list[i].replyComments[0].user.name%>                    <%}else{%>                        <%=list[i].replyComments[0].user.phone%>                    <%}%>                    ：<%=list[i].replyComments[0].content%>                </span>            </div>            <%if(list[i].lastNum>1){%>            <div class="operationElse ">                <span onclick="oneComment('<%=list[i].id%>')">共<%=list[i].lastNum%>条回复</span><em></em>            </div>            <%}%>        </div>        <%}%>    </li>    <%}%>    <%}%></script><script>    var id;    var commentData = {};    var cover;    var shareTitle;    apiready = function () {        id = api.pageParam.id;        quakooData.ajaxGetData(config.getUrl_web_mall_getZoneLoad(),{id:id},function (ret,err) {            if(ret){                if(ret.success){                    document.getElementById('main-title').innerHTML = ret.data.title;                    document.getElementById('content').innerHTML = ret.data.content;                    shareTitle = ret.data.title;                    document.getElementById('commentNum').innerHTML = ret.data.commentNum;                    document.getElementById('ctime').innerHTML = '<em></em>'+quakooUtils.formatTimeToDayDate(ret.data.ctime);                    document.getElementById('lookNum').innerHTML = '<em></em>' + ret.data.lookNum;                    if(ret.data.covers && ret.data.covers[0]){                        var obj = quakooImg.processImg(ret.data.covers[0],document.body.offsetWidth,200);                        document.getElementById('covers').src = obj.url;                        document.getElementById('covers').style.cssText = obj.style;                        cover = ret.data.covers[0];                    }else{                        document.querySelector('.img').style.display='none';                    }                }            }else{                quakooMsg.toast(err.msg)            }        })        //评论列表        new QuakooPage(addHtml,config.getUrl_web_system_commentPager(),{type:3,typeId:id})    }    function conmentOk(isAdd) {        new QuakooPage(addHtml,config.getUrl_web_system_commentPager(),{type:3,typeId:id});        if(isAdd){            document.getElementById('commentNum').innerHTML = parseInt(document.getElementById('commentNum').innerHTML)+1;        }    }    function addHtml(result,append) {        for(var i=0;i<result.length;i++){            if(result[i].user.icon){                var obj = quakooImg.processImg(result[i].user.icon,30,30)                result[i].user.iconStyle = obj.style;                result[i].user.iconUrl = obj.url;            }            result[i].ctime = quakooUtils.getDateDiff(result[i].ctime);            commentData[result[i].id]=result[i];        }        var html = template('commentTmp',{list:result,loginId:quakooUser.getUserInfo().id})        if (append){            var div = document.createElement("div");            div.innerHTML = html;            document.getElementById('commentDom').appendChild(div);        } else {            document.getElementById('commentDom').innerHTML = html;        }        api.parseTapmode();    }    //删除自己发表的评论    function delComment(id,self) {        quakooMsg.showDialog('提示','确认删除该评论吗？','取消','确认',function () {            quakooData.ajaxSubmitData(config.getUrl_web_system_commentDel(),{id:id},function (ret) {                if(ret && ret.success){                    quakooMsg.toast('删除成功');                    self.parentElement.parentElement.style.display = 'none';                    document.getElementById('commentNum').innerHTML = parseInt(document.getElementById('commentNum').innerHTML)-1;                }            })        })    }    //调用发布评论    function diaoyongComment(userid){        api.execScript({            name:'fashionInfo',            script:'diaoyongComment('+userid+',"'+name+'")'        })    }    //跳单个评论的全部回复    function oneComment(id) {        quakooApp.openNewWindow('commentInfo','./commentInfo.html',{parm:commentData[id],id:id});    }    var shareFlag = true;    function openShare() {        if(shareFlag){            shareFlag = false;            if(cover){                quakooMsg.showProgress();                var img = quakooImg.processImg(cover,80,80).url;                //获取图片本地路径                api.imageCache({                    url: img                }, function(ret, err) {                    quakooMsg.hideProgress();                    if (ret.status) {                        quakooShare.openShare('蜜柚时尚',shareTitle,ret.url,config.fashionShareUrl(),{id:id})                    }else{                        quakooShare.openShare('蜜柚时尚',shareTitle,'widget://icon/icon108.png',config.fashionShareUrl(),{id:id})                    }                    setTimeout(function () {                        shareFlag = true;                    },500)                });            }else{                quakooShare.openShare('蜜柚时尚',shareTitle,'widget://icon/icon108.png',config.fashionShareUrl(),{id:id})                setTimeout(function () {                    shareFlag = true;                },500)            }        }    }</script></html>